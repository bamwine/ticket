(function(a){a.extend(a.calendars.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});a.calendars.local=a.calendars.regionalOptions[""];a.extend(a.calendars.cdate.prototype,{formatDate:function(b){return this._calendar.formatDate(b||"",this)}});a.extend(a.calendars.baseCalendar.prototype,{UNIX_EPOCH:a.calendars.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:a.calendars.instance().jdEpoch,TICKS_PER_DAY:24*60*60*10000000,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-MM-dd",formatDate:function(m,f,g){if(typeof m!=="string"){g=f;f=m;m=""}if(!f){return""}if(f.calendar()!==this){throw a.calendars.local.invalidFormat||a.calendars.regionalOptions[""].invalidFormat}m=m||this.local.dateFormat;g=g||{};var o=g.dayNamesShort||this.local.dayNamesShort;var c=g.dayNames||this.local.dayNames;var k=g.monthNamesShort||this.local.monthNamesShort;var h=g.monthNames||this.local.monthNames;var d=g.calculateWeek||this.local.calculateWeek;var i=function(p,q){var r=1;while(n+r<m.length&&m.charAt(n+r)===p){r++}n+=r-1;return Math.floor(r/(q||1))>1};var b=function(r,t,p,s){var q=""+t;if(i(r,s)){while(q.length<p){q="0"+q}}return q};var j=function(p,r,q,s){return(i(p)?s[r]:q[r])};var e="";var l=false;for(var n=0;n<m.length;n++){if(l){if(m.charAt(n)==="'"&&!i("'")){l=false}else{e+=m.charAt(n)}}else{switch(m.charAt(n)){case"d":e+=b("d",f.day(),2);break;case"D":e+=j("D",f.dayOfWeek(),o,c);break;case"o":e+=b("o",f.dayOfYear(),3);break;case"w":e+=b("w",f.weekOfYear(),2);break;case"M":e+=b("M",f.month(),2);break;case"y":e+=(i("y",2)?f.year():(f.year()%100<10?"0":"")+f.year()%100);break;case"Y":i("Y",2);e+=f.formatYear();break;case"J":e+=f.toJD();break;case"@":e+=(f.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"$":e+=(f.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY*1000;break;case"!":e+=(f.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":if(i("'")){e+="'"}else{l=true}break;default:e+=m.charAt(n)}}}return convertDigits(e,this.local.digits)},parseDate:function(r,l,u){l=window.parseDigits(l,this.local.digits);if(l==null){throw a.calendars.local.invalidArguments||a.calendars.regionalOptions[""].invalidArguments}l=(typeof l==="object"?l.toString():l+"");if(l===""){return null}r=r||this.local.dateFormat;u=u||{};var c=u.shortYearCutoff||this.shortYearCutoff;c=(typeof c!=="string"?c:this.today().year()%100+parseInt(c,10));var k=u.dayNamesShort||this.local.dayNamesShort;var v=u.dayNames||this.local.dayNames;var b=u.monthNamesShort||this.local.monthNamesShort;var e=u.monthNames||this.local.monthNames;var x=-1;var g=-1;var w=-1;var p=-1;var i=-1;var t=false;var o=false;var f=function(z,A){var B=1;while(d+B<r.length&&r.charAt(d+B)===z){B++}d+=B-1;return Math.floor(B/(A||1))>1};var y=function(B,D){var z=f(B,D);var C=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(B)+1];var E=new RegExp("^-?\\d{1,"+C+"}");var A=l.substring(q).match(E);if(!A){throw (a.calendars.local.missingNumberAt||a.calendars.regionalOptions[""].missingNumberAt).replace(/\{0\}/,q)}q+=A[0].length;return parseInt(A[0],10)};var j=this;var h=function(z,B,E,C){var D=(f(z,C)?E:B);for(var A=0;A<D.length;A++){if(l.substr(q,D[A].length).toLowerCase()===D[A].toLowerCase()){q+=D[A].length;return A+j.minMonth}}throw (a.calendars.local.unknownNameAt||a.calendars.regionalOptions[""].unknownNameAt).replace(/\{0\}/,q)};var n=function(){if(l.charAt(q)!==r.charAt(d)){throw (a.calendars.local.unexpectedLiteralAt||a.calendars.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,q)}q++};var q=0;for(var d=0;d<r.length;d++){if(o){if(r.charAt(d)==="'"&&!f("'")){o=false}else{n()}}else{switch(r.charAt(d)){case"d":p=y("d");break;case"D":h("D",k,v);break;case"o":i=y("o");break;case"w":y("w");break;case"M":w=y("M");break;case"y":var s=d;t=!f("y",2);d=s;g=y("y",2);break;case"Y":g=y("Y",2);break;case"J":x=y("J")+0.5;if(l.charAt(q)==="."){q++;y("J")}break;case"@":x=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":x=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":q=l.length;break;case"'":if(f("'")){n()}else{o=true}break;default:n()}}}if(q<l.length){throw a.calendars.local.unexpectedText||a.calendars.regionalOptions[""].unexpectedText}if(g===-1){g=this.today().year()}else{if(g<100&&t){g+=(c===-1?1900:this.today().year()-this.today().year()%100-(g<=c?0:100))}}if(i>-1){w=1;p=i;for(var m=this.daysInMonth(g,w);p>m;m=this.daysInMonth(g,w)){w++;p-=m}}return(x>-1?this.fromJD(x):this.newDate(g,w,p))},determineDate:function(d,h,c,b,f){if(c&&typeof c!=="object"){f=b;b=c;c=null}if(typeof b!=="string"){f=b;b=""}var g=this;var e=function(m){try{return g.parseDate(b,m,f)}catch(l){}m=m.toLowerCase();var i=(m.match(/^c/)&&c?c.newDate():null)||g.today();var k=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var j=k.exec(m);while(j){i.add(parseInt(j[1],10),j[2]||"d");j=k.exec(m)}return i};h=(h?h.newDate():null);d=(d==null?h:(typeof d==="string"?e(d):(typeof d==="number"?(isNaN(d)||d===Infinity||d===-Infinity?h:g.today().add(d,"d")):g.newDate(d))));return d}})})(jQuery);